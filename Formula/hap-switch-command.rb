# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class HapSwitchCommand < Formula
  desc "This app provides homekit virtual switch devices executing local commands.
"
  homepage "https://github.com/legnoh/hap-switch-command"
  version "0.0.58"
  license "MIT"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/legnoh/hap-switch-command/releases/download/0.0.58/hap-switch-command_0.0.58_darwin_amd64.tar.gz"
      sha256 "bed6d70e94455655e75f0d60a2842b6ae4bf67642132f9498e2462a5a6f7e167"

      define_method(:install) do
        bin.install "hap-switch-command"
      end
    end
    if Hardware::CPU.arm?
      url "https://github.com/legnoh/hap-switch-command/releases/download/0.0.58/hap-switch-command_0.0.58_darwin_arm64.tar.gz"
      sha256 "e5a1003f256e333e8b12e7d18752842adfd148cc766cb2414e23706795a5b40d"

      define_method(:install) do
        bin.install "hap-switch-command"
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel? && Hardware::CPU.is_64_bit?
      url "https://github.com/legnoh/hap-switch-command/releases/download/0.0.58/hap-switch-command_0.0.58_linux_amd64.tar.gz"
      sha256 "accc21e37b111a982341b8940d3cd1608501c80ebeb34c0e41a3f4112ee33c94"
      define_method(:install) do
        bin.install "hap-switch-command"
      end
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/legnoh/hap-switch-command/releases/download/0.0.58/hap-switch-command_0.0.58_linux_arm64.tar.gz"
      sha256 "67c798911d5527398c4735e3ae16a3b3876d87bc4af1f1245bc88b3b567061e6"
      define_method(:install) do
        bin.install "hap-switch-command"
      end
    end
  end

  def caveats
    <<~EOS
      Please check usage at README:
          https://github.com/legnoh/hap-switch-command/blob/main/README.md
    EOS
  end

  service do
    run [opt_bin/"hap-switch-command", "serve"]
    keep_alive true
    log_path var/"log/hap-switch-command.log"
    error_log_path var/"log/hap-switch-command.log"
  end

  test do
    system "#{bin}/hap-switch-command --help"
  end
end
